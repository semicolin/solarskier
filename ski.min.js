(function(){function t(t,p){return"hsla("+t+",100%,50%,"+p+")"}var C=function(){var t=new Audio("sfx/5A.ogg");new Audio("sfx/5Ab.ogg");var p=new Audio("sfx/5G.ogg");new Audio("sfx/5Gb.ogg");var r=new Audio("sfx/5F.ogg"),g=new Audio("sfx/5E.ogg");new Audio("sfx/5Eb.ogg");var l=new Audio("sfx/5D.ogg");new Audio("sfx/5Db.ogg");var e=new Audio("sfx/5C.ogg"),n=new Audio("sfx/4B.ogg");new Audio("sfx/4Bb.ogg");var m=new Audio("sfx/4A.ogg");new Audio("sfx/4Ab.ogg");var k=new Audio("sfx/4G.ogg");new Audio("sfx/4Gb.ogg"); var a=new Audio("sfx/4F.ogg"),s=new Audio("sfx/4E.ogg");new Audio("sfx/4Eb.ogg");var c=new Audio("sfx/4D.ogg");new Audio("sfx/4Db.ogg");var b=new Audio("sfx/4C.ogg"),d=new Audio("sfx/3B.ogg");new Audio("sfx/3Bb.ogg");var f=new Audio("sfx/3A.ogg"),h=[p,g,e,k,s,b],p=[p,l,n,k,c,d],w=[h,p,h,[t,r,e,m,a,b],p,[g,e,m,s,b,f],p],y=[8,8,4,8,4,8,8],q=!0,u,v;toggle=function(){q=!q};return{a:function(){v=u=0;return this},o:function(a){v+=1;v>y[u]&&(v=0,u=(u+1)%w.length);if(q){var b=w[u];a=b[Math.floor(b.length* a/100)];a.currentTime=0;a.play()}},toggle:toggle}}(),D=function(){function x(){if(document.cookie)for(var a=document.cookie.split(";"),e=0;e<a.length;e++){var c=a[e].split("=");if("solarskierhighscore"===c[0])return r=c[1],!0}return!1}function p(a){a=a.toString();for(var e="",c=1;c<=a.length;c++)e=a[a.length-c]+e,0===c%3&&(e=" "+e);return e}var r=0,g,l,e,n,m,k;return{a:function(a,s,c,b){m=a;k=s;g=c;l=b;e=n=0;x();return this},d:function(a,k){var c=Math.max(16,Math.floor(g/80)),b=Math.max(32,Math.floor(g/ 40));k&&(0.7>n&&(n+=0.005),a.fillStyle="hsla(0,0%,100%,"+n+")",a.fillRect(0,0,g,l));a.textAlign="left";a.textBaseline="top";var d=20;a.fillStyle=t(m.e(),1);a.font=b+"px sans-serif";a.fillText(Math.floor(10*m.h()),20,d);d+=0.9*b;a.font=c+"px Alegreya Sans SC";a.fillText("speed",20,d);d+=c+0.2*b;a.fillStyle=t(245-(m.e()-245),1);a.font=b+"px sans-serif";a.fillText(Math.floor(10*m.l()),20,d);a.font=c+"px Alegreya Sans SC";a.fillText("avg",20,d+0.9*b);a.textAlign="right";a.textBaseline="top";d=20;a.fillStyle= t(245-(m.e()-245),1);a.font=b+"px sans-serif";a.fillText(p(r),g-20,d);d+=0.9*b;a.font=c+"px Alegreya Sans SC";a.fillText("best",g-20,d);d+=c+0.2*b;a.fillStyle=t(m.e(),1);a.font=b+"px sans-serif";a.fillText(p(e),g-20,d);d+=0.9*b;a.font=c+"px Alegreya Sans SC";a.fillText("score",g-20,d);k&&(b=Math.floor(g/15),c=Math.floor(g/40),a.font=b+"px Alegreya Sans SC",a.textAlign="center",a.textBaseline="middle",e===r&&0<r?(a.fillStyle=a.createLinearGradient(0,l/2-b/2,0,l/2+b/2),a.fillStyle.addColorStop(0,t(190, 1)),a.fillStyle.addColorStop(1,t(300,1)),a.fillText("New High Score!",g/2,l/2),a.fillStyle=a.createLinearGradient(0,l/2-b-b/2,0,l/2-b+b/2),a.fillStyle.addColorStop(0,t(300,1)),a.fillStyle.addColorStop(1,t(190,1)),a.font=b+"px sans-serif",a.fillText(p(e),g/2,l/2-b)):(a.fillStyle="black",a.fillText("Game Over",g/2,l/2)),a.font=c+"px Alegreya Sans SC",a.fillStyle="black",a.fillText("press enter to play again",g/2,l/2+b))},q:function(){if(e>r){r=e;var a=new Date;a.setTime(a.getTime()+31536E6);document.cookie= "solarskierhighscore="+r+";expires="+a.toGMTString()}},r:x,f:function(a){e+=a;k.o(a)},p:function(a){e-=a}}}(),E=function(){var x=Math.PI/36,p,r,g,l,e,n,m,k,a,s,c,b,d,f,h;return{a:function(w,y){p=w;r=y;g=Math.floor(w/3);l=y-1;e=-Math.PI/2;n=0;m=[];a=k=0;s=4;c=245;b=1;f=d=0;h=!1;return this},update:function(w,k){w[37]&&!h&&1!==n?(n=-1,f+=b,f=Math.min(f,200),b-=4E-4*f,e=(e-x)%(2*Math.PI),190<c&&(c-=5)):w[39]&&!h&&-1!==n?(n=1,f+=b,f=Math.min(f,200),b-=4E-4*f,e=(e+x)%(2*Math.PI),300>c&&(c+=5)):(f-=15, 0>=f&&(n=f=0),b+=0.02,245<c?c-=5:245>c&&(c+=5));s=4+0.12*f;b=Math.max(b,1);var q=1/(m.length||1);d=b*q+d*(1-q);g+=b*Math.cos(e);l+=b*Math.sin(e);m.push({x:g,y:l,size:s,color:t(c,1)});a+=1;return h||0>g||l<k||g>p||l>r+k?!1:!0},clip:function(b,c,d){if(d){for(;0<a&&m[a-1].y<b-20;)a-=1;k=Math.max(0,a-(200+c-b))}else for(;k<m.length-1&&m[k].y>c+20;)k+=1},d:function(b,c){b.lineCap="round";for(var d=m[k].x,e=m[k].y,f,h=k+1;h<a;h++)f=m[h],f.y<c&&(b.lineWidth=f.size,b.strokeStyle=f.color,b.beginPath(),b.moveTo(d, e),b.lineTo(f.x,f.y),b.stroke()),d=f.x,e=f.y},j:function(a){h=a},e:function(){return c},m:function(){return g},i:function(){return l},g:function(){return e},h:function(){return b},l:function(){return d}}}(),F=function(){var x=t(190,0.8),p=t(300,0.8),r,g,l,e,n,m,k;return{k:function(){function a(a){var b=81;0.1>Math.random()&&(b=100);l.push({x:Math.floor(Math.random()*r),y:a,b:Math.floor(Math.random()*(b-10)+10)})}var s;return{a:function(c,b,d,f){m=c;k=b;r=d;g=f;s=64E3/r;l=[];for(c=g-300;-100<c;c-= s)a(c);e=0;n=l.length;return this},update:function(c){for(s-=0.003;;){var b=l[l.length-1].y-s;if(b<c-100)break;else a(b),n+=1}c=m.m();var b=m.i(),d=m.g()+2*Math.PI;m.j(!1);for(var f=e;f<n;f++){var h=l[f],g=c-h.x,p=b-h.y,q=h.b+100,g=g*g+p*p;g<h.b*h.b?(m.j(!0),h.n=!0,h.c&&(k.p(h.b),h.c=!1)):!h.n&&!h.c&&g<q*q&&(q=(d-Math.atan2(h.y-b,h.x-c)+2*Math.PI)%(2*Math.PI),Math.PI/4<q&&q<3*Math.PI/4?(h.c=-1,k.f(h.b)):5*Math.PI/4<q&&q<7*Math.PI/4&&(h.c=1,k.f(h.b)))}},clip:function(a,b,d){if(d){for(;0<e&&l[e-1].y< b+100;)e-=1;for(;0<n&&l[n-1].y<a-100;)n-=1}else for(;l[e].y>b+100;)e+=1},d:function(a){for(var b,d=e;d<n;d++)b=l[d],a.fillStyle=-1===b.c?x:1===b.c?p:"hsla(245,10%,50%,0.5)",a.beginPath(),a.arc(b.x,b.y,b.b,0,2*Math.PI),a.fill(),b.c&&(a.fillStyle="white",a.font=Math.floor(0.8*b.b)+"px sans-serif",a.textAlign="center",a.textBaseline="middle",a.fillText(b.b,b.x,b.y))}}}()}}();(function(){function x(a){a.preventDefault();c[37]=!1;c[39]=!1}function p(a){a.preventDefault();q||u?(m(),e()):parseInt(a.changedTouches[0].clientX, 10)<b/2?c[37]=!0:c[39]=!0}function r(a){c[a.which]=!1}function g(a){c[a.which]=!0;(q||u)&&c[13]&&(clearInterval(s),m(),e());c[83]&&B.toggle()}function l(){if(!u){var e=-1*v.h()*Math.sin(v.g()),g=1-(v.i()-f)/d,g=Math.max(0,3*g-1);y=Math.max(-0.025,e*g-h);w+=5E-4}h+=y;h=Math.max(h,w);f-=h;a.setTransform(1,0,0,1,0,-Math.floor(f));a.clearRect(0,f,b,d);u||(A.update(f),v.update(c,f)||(u=!0,y=-0.05,w=-15,z.q()));A.clip(f,f+d,u);v.clip(f,f+d,u);A.d(a);v.d(a,f+d);a.setTransform(1,0,0,1,0,0);z.d(a,u);0<f&& clearInterval(s)}function e(){c={};y=w=h=f=0;B=C.a();v=E.a(b,d);z=D.a(v,B,b,d);A=F.k.a(v,z,b,d);s=setInterval(l.bind(this),1E3/60);u=q=!1}function n(){var c=Math.floor(b/10),e=Math.floor(b/40);a.font=c+"px Cinzel Decorative";a.textAlign="center";a.textBaseline="middle";a.fillStyle="white";a.fillText("Solar Skier",b/2,d/2);a.fillStyle=a.createLinearGradient(0,d/2-c/2,0,d/2+c/2);a.fillStyle.addColorStop(0,t(190,1));a.fillStyle.addColorStop(1,t(300,1));a.fillText("Solar Skier",b/2,d/2);a.font=e+"px Alegreya Sans SC"; a.fillStyle="black";a.fillText("left + right to turn",b/2,d/2+0.75*c);a.fillText("press enter to begin",b/2,d/2+0.75*c+e);a.fillStyle="hsla(245,10%,50%,0.5)";a.beginPath();a.arc(0.677*b,d/2-0.8*c,c/5,0,2*Math.PI);a.fill();a.textAlign="left";a.textBaseline="bottom";a.fillStyle="gray";a.font=e+"px Alegreya Sans SC";a.fillText("s: toggle sound",10,d-10);q=!0}function m(){k.width=window.innerWidth;k.height=window.innerHeight-5;b=k.width;d=k.height}var k,a,s,c,b,d,f,h,w,y,q,u,v,z,A,B;return{a:function(b){k= b;a=k.getContext("2d");c={};document.onkeydown=g;document.onkeyup=r;k.addEventListener("touchstart",p);k.addEventListener("touchend",x);m();setTimeout(n,250)}}})().a(document.getElementById("game"))})();